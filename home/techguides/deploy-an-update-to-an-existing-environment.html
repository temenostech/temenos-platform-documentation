<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Deploy an update to an existing environment </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Deploy an update to an existing environment ">
    <meta name="generator" content="docfx 2.22.2.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <link rel="stylesheet" href="../../styles/woocircle.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" class="Deploy an update to an existing environment ">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar" role="navigation">
          <div class="container">
            <div class="row">
              <div class="navbar-header col-md-2">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
                
                <a class="navbar-brand" href="https://www.temenos.com/platform/temenos-continuous-deployment-devops/">
                  <img id="logo" src="/logo.png" alt="">
                </a>
              </div>
              <div class="themainmenu col-md-10">
              <div class="collapse navbar-collapse" id="navbar">
                <form class="navbar-form navbar-right" role="search" id="search">
                  <div class="form-group">
                    <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                  </div>
                </form>
              </div>
              </div>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">

<div class="NOTE"><h5>Note</h5><p> With the 202103 release, the TCD user guide will move to the <a href="https://tcsp.temenos.com/TCD/Modules/TemenosContinuousDeployment/Overview/Overview.htm">Temenos Customer Support Portal (TCSP)</a>. We recommend you to log in to TCSP and check if your credentials are available. Raise a ticket at <a href="CloudPlatformSupport@temenos.com">CloudPlatformSupport@temenos.com</a> if you encounter any issues.</p>
</div>
<h1 id="deploy-an-update-to-an-existing-environment">Deploy an update to an existing environment</h1>
<p>This document can be used by technical staff who need to deploy different features on a Temenos Continuous Deployment Environment. Each Environment has an associated Repository for uploading different type of features based on the Environment Template type, these features being deployed automatically to your Environment.</p>
<h1 id="pre-requisites">Pre-requisites</h1>
<ul>
<li>Make sure you have a GUI Git Client installed in your local machine. This guide uses <em>TortoiseGit</em> Git Client that can be installed from <a href="https://tortoisegit.org/download/" target="blank">here</a>.</li>
<li>Make sure you have an user created under your organisation that has a public ssh key attached. Please check this <a href="user-creation-in-paas.html" target="blank">guide</a> to understand how you can create an user or how you can generate and attach a ssh key to an user.</li>
</ul>
<h1 id="clone-environment-repository">Clone Environment Repository</h1>
<p> To clone an environment repository login to your organisation, select your environment and locate the Endpoint of <strong>Repository</strong> Application (this is the last available endpoint on the environment page). 
o</p>
<ul>
<li><p>Click the <strong>copy to clipboard icon</strong> from the right:</p>
<p><img src="images/use-git-endpoint.png" alt="repository"></p>
</li>
<li><p>Create a folder in any location from your local machine. In the current example, a folder name GitLabRepo is used.</p>
</li>
<li><p>Go to your local repository folder (i.e. GitLabRepo), right click inside the folder and choose <strong>Git Clone</strong>.</p>
<p><img src="images/gitlab_repo_clone1.png" alt="gitlab repo clone1"></p>
</li>
<li><p>The bellow screen is opened where you have to paste the Endpoint of <strong>Repository</strong> Application of your Environment in URL textbox, set the Directory textbox to your local repository folder (GitLabRepo folder in our example) and load your private key.</p>
<p><img src="images/gitlab_repo_clone2.png" alt="gitlab repo clone2"></p>
</li>
<li><p>The content is downloaded from the Repository of your Environment to your local machine.</p>
<p><img src="images/gitlab_repo_clone3.png" alt="gitlab repo clone3">
<br>
</br></p>
</li>
</ul>
<h2 id="the-environment-folder-structure-after-the-clone">The environment folder structure after the clone</h2>
<p>Before the 202010 Temenos Continous Deployment platform release, the environment binaries&#39; folders were comprised in 9 folders. From the 202010 platform release onwards, after cloning an environment, you can now find dedicated folders for each binaries where you can upload them. The example below shows what changed:</p>
<ul>
<li><p>Env Structure before Git Folder Standardization: </p>
<p><img src="images/old-env-structure.png" alt=""></p>
</li>
<li><p>Env Structure after Git Folder Standardization:</p>
<p><img src="images/new-env-structure.png" alt=""></p>
</li>
</ul>
<div class="NOTE"><h5>Note</h5><p>If you need to push new changes into your existing environments, you have to clone the GIT folder again.</p>
</div>
<p><br>
</br></p>
<p>With the 202010 platform release, you can find below and example of the before and after components name and structure (where N/A is present the component folder was not present in the old folder structure).</p>
<table>
<thead>
<tr>
<th>BEFORE</th>
<th>AFTER</th>
<th>PREVIOUS FORMAT   SUPPORTED</th>
<th>CURRENT FORMAT   SUPPORTED</th>
<th>NOTES AND   CHANGES IN THE EXISTING FUNCTIONALITY</th>
</tr>
</thead>
<tbody>
<tr>
<td>N/A</td>
<td>authenticator</td>
<td>*.war</td>
<td>*.war</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>axis2</td>
<td>*.war</td>
<td>*.war</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>browser-classic</td>
<td>*.war</td>
<td>*.war</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>browser-generated</td>
<td>*.zip</td>
<td>*.zip</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>browser-iris</td>
<td>*.war</td>
<td>*.war</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>dsf-iris</td>
<td>*.war</td>
<td>*.war</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>dsf-uxp</td>
<td>*.war</td>
<td>*.war</td>
<td>N/A</td>
</tr>
<tr>
<td>client_files/helptext</td>
<td>helptext</td>
<td>*.zip</td>
<td>*.zip</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>irf-provider-container</td>
<td>*.war</td>
<td>*.war</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>irf-t24catalog-services</td>
<td>*.war</td>
<td>*.war</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>irf-test-web</td>
<td>*.war</td>
<td>*.war</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>irf-web-client</td>
<td>*.war</td>
<td>*.war</td>
<td>N/A</td>
</tr>
<tr>
<td>packages</td>
<td>l3-ds-packages</td>
<td>*.jar,   *.zip</td>
<td>*.zip</td>
<td>N/A</td>
</tr>
<tr>
<td>client_files/h2db</td>
<td>model-bank-database-h2</td>
<td>*.zip</td>
<td>*.zip</td>
<td>db.properties file should be included in the zip file   . The format of db.properties should be as follows: db_name=TAFJDB -&gt;   without extension .mv.db or .h2.db.</td>
</tr>
<tr>
<td>client_files/sqldb</td>
<td>model-bank-database-sqlserver</td>
<td>*.bak</td>
<td>*.zip</td>
<td>db.properties file should be included in the zip file   . The format of db.properties should be as follows: db_name=UTPSQL2016 -&gt;   without extension names.</td>
</tr>
<tr>
<td>post-dsf-packages</td>
<td>l3-post-dsf-packages</td>
<td>zip   of zip</td>
<td>zip   of zip</td>
<td>N/A</td>
</tr>
<tr>
<td>pre-dsf-packages</td>
<td>l3-pre-dsf-packages</td>
<td>zip   of zip</td>
<td>zip   of zip</td>
<td>N/A</td>
</tr>
<tr>
<td>addons</td>
<td>t24-Addons</td>
<td>*.zip</td>
<td>*.zip</td>
<td>The main package is a  .zip file and the name  of the .zip can be anything. Inside the .zip you can include the .jar files you need to deploy. Additionally, you can add an environment file (i.e. a Notepad file) that can be used to add or update the java heap size in the app server start up file (java_opts= - replace the variables with the appropriate ones). To change the This zip should be pushed to git and then deploy. See an example below.</td>
</tr>
<tr>
<td>N/A</td>
<td>t24-eb-authentication-service-ejb</td>
<td>*.jar</td>
<td>*.jar</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>t24-eb-catalog-service-ejb</td>
<td>*.jar</td>
<td>*.jar</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>t24-eb-ofs-connector-service-ejb</td>
<td>*.jar</td>
<td>*.jar</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>t24-eb-resource-provider-service-ejb</td>
<td>*.jar</td>
<td>*.jar</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>t24-if-integration-framework-service-ejb</td>
<td>*.jar</td>
<td>*.jar</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>t24-interactiontests-iris</td>
<td></td>
<td></td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>t24-jars</td>
<td>*.zip</td>
<td>*.zip</td>
<td>zip of multiple folders containing jars. For eg:   t24lib, l3lib. Note: We use the folders t24lib and l3lib for core and l3   libraries respectively. Hence the same naming convention has to be used for   the artifacts.</td>
</tr>
<tr>
<td>client_files/localjars</td>
<td>t24-l3-java</td>
<td></td>
<td></td>
<td>zip of l3libraries</td>
</tr>
<tr>
<td>plugins</td>
<td>war-package</td>
<td>*.zip   containing war, jar or war and optional .endpoint file</td>
<td>*.zip containing war, jar or war and optional .endpoint   file which contains the dns name. Ie.: Provider   APIs~<a href="https://t24-v1f2k9y77x18.temenos.cloud/provider-apis/api/v1.0.0/meta/apidocs">https://t24-v1f2k9y77x18.temenos.cloud/provider-apis/api/v1.0.0/meta/apidocs</a></td>
<td>Optional .endpoint file within *.zip should now contain   he keyword &#39;localhost&#39; instead of the dnsname to be able to used during   factory run. Ie.: Provider   APIs~<a href="https://localhost/provider-apis/api/v1.0.0/meta/apidocs">https://localhost/provider-apis/api/v1.0.0/meta/apidocs</a></td>
</tr>
<tr>
<td>N/A</td>
<td>t24-ud</td>
<td>*.zip   containing UD folders</td>
<td>*.zip   containing UD folders</td>
<td>N/A</td>
</tr>
<tr>
<td>updates</td>
<td>t24-updates</td>
<td>zip   of zip</td>
<td>zip   of zip</td>
<td>N/A</td>
</tr>
<tr>
<td>wsdl</td>
<td>wsdl</td>
<td></td>
<td></td>
<td>N/A</td>
</tr>
<tr>
<td>client_files/localjars/ext</td>
<td>tafj-ext-jars</td>
<td>zip   of jars</td>
<td>zip   of jars</td>
<td>zip of l3libraries</td>
</tr>
<tr>
<td>N/A</td>
<td>tafj-installer</td>
<td>*.zip   containing installer</td>
<td>*.zip   containing installer</td>
<td>The TAFJ will be redeployed (full installation, not   patch) hence please make sure any properties that you would like to include   are present within the .properties file inside the installer. For more   details, refer to tafj.installer notes added in the Transact Template   Overview Page.</td>
</tr>
<tr>
<td>N/A</td>
<td>tcib-api</td>
<td>*.war</td>
<td>*.war</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>tcua-tcuseradmin-iris</td>
<td>*.war</td>
<td>*.war</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>tcua-useradministration</td>
<td>*.war</td>
<td>*.war</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>tcxb2-generated</td>
<td>*.war</td>
<td>*.war</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>tcxb2-iris</td>
<td>*.war</td>
<td>*.war</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>tcxb2-retail</td>
<td>*.war</td>
<td>*.war</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>temp.release</td>
<td></td>
<td></td>
<td>*.zip containing the temp.release</td>
</tr>
<tr>
<td>N/A</td>
<td>tocf-ee</td>
<td>*.zip</td>
<td>*.zip</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>uxp-browser</td>
<td>*.war</td>
<td>*.war</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>uxp-god-properties</td>
<td>*.zip</td>
<td>*.zip</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>resourceserverwar</td>
<td>*.war</td>
<td>*.war</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>irf-rp-services</td>
<td>*.war</td>
<td>*.war</td>
<td>N/A</td>
</tr>
<tr>
<td>N/A</td>
<td>t24-eb.product</td>
<td></td>
<td>*.txt</td>
<td>The text file should contain the number of product ,   product name separated by ‘~&#39; (more than 1 product) and product codes   separated by &#39;~’ (more than 1 product) . EX: 2,name1~name2,code1~code2</td>
</tr>
<tr>
<td>N/A</td>
<td>jboss-modules</td>
<td></td>
<td>*.zip</td>
<td>*.zip containing the folders, sub folders, jars, with   the module.xml which can be unzipped to modules folder in jboss It also   checks for the existing folders com/temenos/t24, com/temenos/tafj ,system ,if   exists it is ignored and other folders are copied</td>
</tr>
<tr>
<td>N/A</td>
<td>standalone.xml</td>
<td></td>
<td>*.xml</td>
<td>*.xml containing standalone.xml file. The template   file for OSS and TSS are provided at point 6 in this user guide for both OSS   and TSS templates.</td>
</tr>
</tbody>
</table>
<p>See below an example in which an environment file with the JAVA_OPTS change has been added inside the t24-addons folder:
 <img src="images/java-heap-size.png" alt=""></p>
<div class="NOTE"><h5>Note</h5><p>Do not leave multiple versions of the same component type in the GIT folder as this would produce undesired results.
<br>
</br></p>
</div>
<h1 id="commit--push-features-to-repository">Commit &amp; Push features to Repository</h1>
<p>To commit and push any changes in the environment go to the repository folder from your local machine (i.e GitLabRepo) and copy your file/files (related to your required features that must be deployed to your Environment) to the specific folder/folders based on your requirement. In this guide, an update is pushed to the Environment Repository.</p>
<p><em>Important: T24 Updates must be packaged as .zip of .zip file while it is deployed through the Git repository (the parent .zip file name can be anything). Example:</em></p>
<blockquote><p>T24-updates.zip</p>
<p>&nbsp; &nbsp; &nbsp; |__T24-Updates-2020-X-Y.zip</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__ *.Jar</p>
</blockquote>
<p> <img src="images/repo_commit_1.png" alt="repo commit 1"></p>
<ul>
<li><p>To commit the files/files to Environment Repository, right click inside repository folder from your local machine and choose <strong>Git Commit -&gt; &quot;master&quot;...</strong> option.</p>
<p><img src="images/repo_commit_2.png" alt="repo commit 2"></p>
</li>
<li><p>The following screen will appear in which your repository changes can be observed and commited. In order to commit, you have to input a commit message and check the checkbox next to each new file if it is the case.</p>
<p><img src="images/repo_commit_3.png" alt="repo commit 3"></p>
</li>
<li><p>The following screen will appear in which you have to push your changes to Environment Repository. In order to push, click the <strong>Push</strong> button.</p>
<p><img src="images/repo_commit_4.png" alt="repo commit 4"></p>
</li>
<li><p>In the next screen, you have to click <strong>Ok</strong> button.</p>
<p><img src="images/repo_commit_5.png" alt="repo commit 5"></p>
</li>
<li><p>Finally, the status screen for your push action is displayed.</p>
<p><img src="images/repo_commit_6.png" alt="repo commit 6"></p>
</li>
</ul>
<p><br>
</br></p>
<h1 id="trigger-deployment">Trigger Deployment</h1>
<p>After all the required features are committed and pushed to the Environment Repository, you have to deploy these features in your Environment. To do this, login to your organisation, select your environment, locate <strong>Repository</strong> Application and click the <strong>Deploy</strong> button:</p>
<p> <img src="images/use-git-deploy.png" alt="repo deploy 1"></p>
<ul>
<li><p>A notification appears which displays the list of components that will be deployed. Tick the confirmation box to proceed:</p>
<p><img src="images/deploy-components.png" alt="deploy components"></p>
</li>
<li><p>The Environment and its manageable Applications status will be changed to <span style="color:#4d94ff;font-weight:600;">Deploying</span> during the deployment process and the Deploy button becomes disabled until the deployment is finished.</p>
</li>
</ul>
<p>The logs generated by the deployment process can be also observed in the <strong>Events</strong> tab of your Environment where a new event for <em>RepositoryDeploy</em> will be created.</p>
<p> <img src="images/repo_deploy_2.png" alt="repo deploy 2"></p>
<div class="NOTE"><h5>Note</h5><p>The deployment process is triggered <strong>manually</strong> by the user after commiting and pushing all the required features in Environment Repository or whenever is appropiate based on the fact that the user can commit and push features to Environment Repository multiple times and choose when to trigger the deployment.</p>
</div>
<div class="NOTE"><h5>Note</h5><p>Temenos Continuous Deployment uses PROC as the locking mechanism. If you need to change it, proceed via the TAFJEE properties set up. Refer to the TAFJ documentation for more details.</p>
</div>
<p><br>
</br></p>
<h1 id="how-temenos-continuous-deployment-platform-installs-ds-packages">How Temenos Continuous Deployment Platform installs DS packages</h1>
<p>Temenos Continuous Deployment provides users the ability to deploy one or more Design Studio packages into the environment. This pages explains what happens in the background when packages are deployed to the environment.</p>
<ul>
<li><p>one or more DS packages which with the .jar extension can be added directly into the Git folder packages as shown below.</p>
<p><img src="images/ds-installation.png" alt=""></p>
</li>
<li><p>one or more DS packages can be bundled into a .zip file and put under the Git folder packages/l3 folder </p>
<p><img src="images/ds-installation-l3packages.png" alt=""></p>
</li>
<li><p>the following files are cleared from the environment:</p>
<pre><code>    &lt;T24_HOME&gt;/packages

    &lt;T24_HOME/REL.*.ESON

    &lt;T24_HOME&gt;/REL.*.XML
</code></pre></li>
<li><p>Any existing <strong><tafj_home>/log/packageDataInstaller.txt</tafj_home></strong> will be renamed to <strong><tafj_home>/log/packageDataInstaller-<datetime>.txt</datetime></tafj_home></strong></p>
</li>
<li><p>all the packages files with the .zip format are unziped to the <strong>package</strong> folder</p>
</li>
<li><p>a backup of the <strong>&amp;SAVEDLISTS&amp; f</strong>older is created</p>
</li>
<li><p>the <strong>T24PackageInstaller</strong> command is run for all the files under the <strong>package</strong> folder</p>
</li>
<li><p>an error message is displayed if the output of the above command is not successful</p>
</li>
<li><p>all the  files released to DSPackageInstaller folder are copied to l3lib folder</p>
</li>
<li><p>a module.xml is regenerated based on all the JAR files</p>
</li>
<li><p>run the packageDataInstaller command. We retry this command until the records from the packages are all deployed or some records cannot be deployed further besides iteration. </p>
</li>
<li><p>the output of the command above command is saved into a file in <strong>TAFJ/log</strong> named <strong>packageDataInstaller.txt</strong>. An overall result of retries will be written at the end of packageDataInstaller.txt, which is X0 or X1.</p>
</li>
<li><p>an error message is displayed in the events log  if the output of the <strong>packageDataInstaller</strong> command gives error X1</p>
</li>
<li><p>a information message appears in the events log  if the output of the packageDataInstaller command is successful X0</p>
</li>
<li><p>once the above steps are completed,  an automated task is run to authorize all the exception records</p>
</li>
<li><p>the <strong>appserver</strong> is restarted and the environment is accesible.
<br>
</br></p>
</li>
</ul>
<h1 id="how-temenos-continuous-deployment-platform-installs-updates">How Temenos Continuous Deployment Platform installs updates</h1>
<p> When a T24 update is deployed into a Temenos Continuous Deployment environment, either via the <a href="http://documentation.temenos.cloud/home/techguides/deploy-an-update-to-an-existing-environment.html">Deploy button</a> or during a <a href="http://documentation.temenos.cloud/home/techguides/run-factory.html">factory run</a>, the following steps take place in sequence in the background.</p>
<blockquote><p><strong>Note</strong>: <strong>$T24_HOME corresponds to UD folder.</strong> The environment variables and paths correspond to Linux based environment. Nonetheless, the same set of steps are executed for Windows templates. $T24_HOME corresponds to the path to UD folder. The $T24_HOME/&amp;SAVEDLISTS&amp; contains the UpdateLog and the REL files corresponding to the updates. </p>
<p>Please check the files under $T24_HOME/&amp;SAVEDLISTS&amp; along with TAFJ/Log folder in SFTP in case of update failures.</p>
</blockquote>
<ul>
<li><p><strong>$T24_HOME/updater/bin</strong> is given proper rights</p>
</li>
<li><p>(if it does not exist already) a folder called <strong>T24Updates</strong> is created under <strong>$T24_HOME/../JARS</strong> folder </p>
</li>
<li><p>a backup of the  <strong>$T24_HOME/&amp;SAVEDLISTS&amp;</strong> folder is taken and the folder is created again as type UD</p>
</li>
<li><p>the <strong>T24Version</strong> and the updater command is run from updater/bin</p>
</li>
<li><p>in the <strong>tafj.properties</strong> file, the precompile path is updated with the <strong>T24Updates</strong> folder path. The path will be $T24_HOME/../JARS/T24Updates:$T24_HOME/../JARS/t24lib</p>
</li>
<li><p>the automated script stops all the TSA.SERVICE that are in AUTO and START mode. Please check the logs $T24_HOME/SER.LIST for more details on the services that are stopped during this step</p>
</li>
<li><p>the updates released are copied from the <strong>updates</strong> folder to <strong>T24Updates</strong> folder. In case of service updates, the automated script copies the libraries under the main update folder and not the ones from extensions</p>
</li>
<li><p><strong>T24.UPDATE.SERVICE</strong> is run in the environment</p>
</li>
<li><p>the automated script authorises the exceptions </p>
</li>
<li><p>the automated script reverts the <strong>TSA.SERVICES</strong> to their previous state. Please refer to <strong>$T24_HOME/SER.LIST</strong> for the list of services that will be restored during this process.</p>
</li>
</ul>
<p><br>
</br></p>
<h1 id="how-to-deploy-the-dsf-packages">How to deploy the DSF packages</h1>
<p>To deploy DSF packages, the following components must be present in  Extend/ Assemble environments:</p>
<ol>
<li><p>DSF Packager artefacts available in the T24 Environment. It is assumed that the UXP license file includes the license for the domain *.temenos.cloud. Reach out to Temenos license team to confirm the same.  </p>
<p>dsf-iris.war</p>
<p>dsf-uxp.war</p>
</li>
<li><p>IRF Catalog service in T24 environment:</p>
<p>irf-t24catalog-services.war</p>
</li>
<li><p>IRIS Catalog service in T24 environment:</p>
<p>t24-eb-catalog-service-ejb.jar
<br>
</br></p>
<h2 id="dsf-package-structure">DSF Package Structure</h2>
<p>The l3-pre-dsf-packages and/or l3-post-dsf-packages containing DSF packages have the <strong>format of zip of zip</strong>. See below a  sample package:</p>
<p><img src="images/dsf-package-structure.png" alt=""></p>
</li>
</ol>
<p><br>
</br></p>
<h2 id="dsf-deployment-overview">DSF Deployment Overview</h2>
<p> See below what happens in the environment when a DSF packacke is deployed:</p>
<ul>
<li><p>The zip of zip file is downloaded into a temporary file within the TCD environment</p>
</li>
<li><p>A curl command is executed to deploy the package file in the zip format. See the example below:</p>
<p><code>curl -X POST -L -F &quot;package=@MyTestPack-1.0.0.zip;type=application/zip&quot; http://&lt;dnsname&gt;/dsf-iris/api/v1.0.0/meta/dsfpackages/deploy)</code></p>
</li>
<li><p>The output of the curl command is displayed in the events log</p>
</li>
<li><p>See below a sample output of a successful deployment (this is available in your <strong>Events</strong> tab on your environment page):</p>
<p><img src="images/dsf-package-success-sample.png" alt=""></p>
</li>
<li><p>See below a sample output of a failed deployment (this is available in your <strong>Events</strong> tab on your environment page):</p>
<p><img src="images/dsf-package-error-sample.png" alt="">
<br>
</br></p>
<h2 id="dsf-deployment-notes">DSF Deployment Notes</h2>
</li>
<li><p>For the factory run, the components mentioned in 1, 2 and 3 from the <strong>How to deploy the DSF packages</strong> should be defined in the factory.</p>
</li>
<li><p>In an Extend environment, there will be two new folders named <strong>pre-dsf-packages</strong> and <strong>post-dsf-packages</strong>:</p>
<p><img src="images/dsf-pre-post-packages.png" alt=""></p>
</li>
<li><p>In case you only have one set of DSF package to be installed into a Temenos Continuous Deployment Extend environment, please include the package in** pre-dsf-packages** folder in the GIT.</p>
</li>
<li><p>We currently support a single file inside the pre-dsf / post-dsf folders. Bundle all your DSF Packages into a .zip file before uploading them
<br>
</br></p>
</li>
</ul>
<h2 id="standalonexml-file-notes">Standalone.xml file notes</h2>
<p>There are different standalone.xml templates for <a href="http://documentation.temenos.cloud/home/techguides/templates-list.html#t24">TSS (Jboss/ SQL) and OSS (Widlfly/ H2)</a>. These are provided to you by us.</p>
<h3 id="the-standalonexml-tss-jboss--sql-template">The standalone.xml TSS (Jboss &amp; SQL) template</h3>
<ul>
<li><p>don’t change any of the static values</p>
</li>
<li><p>the only changes you can apply to the files are:</p>
<ul>
<li><p>in the datasource code block and give a new name (ie. instead of jndi-name=&quot;java:/jdbc/t24DS&quot; you can change the name from t24DS to another one) or change the min/max-pool-size. If you want to add more datasource copy the entire code block highlighted below.</p>
<p><img src="images/standalone-tss.png" alt=""></p>
</li>
<li><p>in the queues add new connection pools (copy-paste the link and change the name, max-pool-size)</p>
<p><img src="images/standalone-queues.png" alt=""></p>
</li>
<li><p>add custom queues ( copy the highlighted queue below and add another name (ie. instead of tecEventsTopic you can add another name)</p>
<p><img src="images/standalone-custom-queues.png" alt=""></p>
</li>
</ul>
<p><strong>Other alterations added to the XML file will result in a failed deployment.</strong></p>
</li>
</ul>
<h3 id="the-dbproperties-file---only-applicable-for-oss-wildfly-h2-templates">The db.properties file - only applicable for OSS (Wildfly/ H2) templates</h3>
<p>You can place the TAFJDB.zip file in the model-bank-database-h2 folder. The db.properties file should be added to the corresponding H2 .zip files in the artifactory and the H2 machines must have a copy of this file.</p>
<div class="NOTE"><h5>Note</h5><p>If the Golden Copy is provided by you make sure to have the db.properties file under the model-bank-database-h2. If this is not present, the environment will be created using the default modelbank credentials.</p>
</div>
<p><strong>It is mandatory to have the db.properties file included along with your H2 DB .zip file, otherwise the environment will be created using the default modelbank credentials.</strong></p>
<p>  <img src="images/tafjdb.png" alt=""></p>
<p>You can add the db.properties file into the TAFJDB.zip. The db.properties file contains the db name, clientdb user and pass, as well as the dbuser and dbpassword where:</p>
<ul>
<li><p>The dbuser is the Transact/ T24 user which has SUPER.USER privileges</p>
</li>
<li><p>These entries are used by the Temenos Continuous Deployment automation scripts to run the T24 programs and TSA SERVICES. If you fail to provide the below the automation scripts will use the default Model Bank credentials (INPUTT/123456) which might lead to failed database deployments.</p>
</li>
</ul>
<p>  <img src="images/db-properties.png" alt=""></p>
<ul>
<li><p><strong>If the folder inside TAFJDB.zip file is renamed, then it is mandatory in the db.properties to add the db-name the same as the db folder name and the credentials for the respective db.</strong></p>
<p><img src="images/db-properties2.png" alt=""></p>
</li>
</ul>
<div class="NOTE"><h5>Note</h5><p>If you want to overwrite the database it is important to do at least one change before deploying it. Otherwise the platform will pick the initial database only.
<br>
</br></p>
</div>
<h1 id="attachments">Attachments</h1>
<p>You can download/ view the Standalone OSS (Wildfly/ H2)/ TSS (Jboss/ SQL) and the db.properties files below:</p>
<ul>
<li><p><strong><a href="./../zip/client-standalone-OSS-1">Standalone OSS (Wildfly/ H2) file applicable for lower template versions than 202008</a></strong> </p>
</li>
<li><p><strong><a href="./../zip/client-standalone-OSS-2">Standalone OSS (Wildfly/ H2) file applicable for higher template versions than 202008 (including the 202008 version)</a></strong> </p>
</li>
<li><p><strong><a href="./../zip/client-standalone-TSS-1">Standalone TSS (Jboss/ SQL) file applicable for lower template versions than 202008</a></strong> </p>
</li>
<li><p><strong><a href="./../zip/client-standalone-TSS-2">Standalone TSS (Jboss/ SQL) file applicable for higher template than 202008 (including the 202008 version)</a></strong> </p>
</li>
<li><p><strong><a href="../zip/db.properties">db.properties file</a></strong> </p>
</li>
<li><p>Video tutorial available <strong><a href="https://youtu.be/Kc5nXfJewKg">here</a></strong>.</p>
</li>
</ul>
<h1 id="user-permissions-required">User Permissions Required</h1>
<p>To be able to perform the above operations the below permissions need to be enabled for your user:</p>
<ul>
<li>UPDATE_USER (it is required to add the SSH Key if this hasn&#39;t been done after creating the user)</li>
<li>CREATE_ENVIRONMENT</li>
<li>UPDATE_ENVIRONMENT</li>
<li>DELETE_ENVIRONMENT</li>
<li>REDEPLOY_ENVIRONMENT</li>
<li>START_ENVIRONMENT</li>
<li>STOP_ENVIRONMENT</li>
<li>MANAGE_ENVIRONMENTS</li>
</ul>
<p>To have a better understanding of the user permissions, hover the cursor over the variables and a short description will pop up or click <a href="http://documentation.temenos.cloud/home/techguides/user-permissions">here</a> to read more.</p>
<p><br></p>
              <hr>
              
              <div id="disqus_thread"></div>
            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      
      <footer>
        <div class="container">
          <div class="row">
            <div class="col-md-6 footer-note left">
              <p>
                <a href="/"><img src="/logo-bottom.png" alt=""></a>
                <a href="https://www.temenos.com/en/accessibility/">Accessibility</a>
                <a href="https://www.temenos.com/en/legal-information/cookie-policy/">Cookie Policy</a>
                <a href="https://www.temenos.com/en/legal-information/privacy-policy/">Privacy Policy</a>
                <a href="https://www.temenos.com/en/legal-information/terms-and-conditions/">Terms & Conditions</a>
              </p>
            </div>
      
            <div class="col-md-6 footer-note right">
              <p>
                Copyright &copy; 2020 Temenos Headquarters SA <span>&#183;</span>
                <a target="_blank" href="https://www.facebook.com/TemenosGroup"><i class="fa fa-facebook" aria-hidden="true"></i></a> 
                <a target="_blank" href="https://twitter.com/Temenos"><i class="fa fa-twitter" aria-hidden="true"></i></a>
                <a target="_blank" href="http://www.linkedin.com/company/temenos"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
                <a target="_blank" href="//plus.google.com/u/0/100035548059267323447?prsrc=3"><i class="fa fa-google-plus" aria-hidden="true"></i></a>
              </p>
            </div>
          </div>
      
        </div>
      </footer>
      
      <div class="back-to-top">
        <a href="#top">
          <span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-arrow-up fa-stack-1x fa-inverse"></i></span>
        </a>
      </div>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
    <script id="dsq-count-scr" src="//temenostech.disqus.com/count.js" async=""></script>
    
    <script>
    /* When the user clicks on the button, 
    toggle between hiding and showing the dropdown content */
    function myFunction() {
        document.getElementById("myshareDropdown").classList.toggle("show");
    }
    
    // Close the dropdown menu if the user clicks outside of it
    window.onclick = function(event) {
      if (!event.target.matches('.sharedropbtn')) {
    
        var dropdowns = document.getElementsByClassName("sharedropdown-content");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains('show')) {
            openDropdown.classList.remove('show');
          }
        }
      }
    }
    </script>
    
    <script>
    	window.onload = function(){
        	document.getElementById("shareFacebook").href = 'https://www.facebook.com/sharer/sharer.php?u=' + window.location.toString();
    
        	document.getElementById("shareTwitter").href = 'https://twitter.com/intent/tweet?text=Temenos+Developer+Portal&url=' + window.location.toString();
    
        	document.getElementById("shareGoogle").href = 'https://plus.google.com/share?url=' + window.location.toString();
    
        	document.getElementById("shareLinkedin").href = 'https://www.linkedin.com/shareArticle?mini=true&url=' + window.location.toString() + '&title=Temenos+Developer+Portal&summary=&source=';
    
        	document.getElementById("shareEmail").href = 'mailto:' + window.location.toString();
    	}
    </script>
    
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-38593742-8"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-38593742-8');
    </script>  
  </body>
</html>
